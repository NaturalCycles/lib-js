import{_ as b}from"./chunks/types.C-9dMxxX.js";import{_ as C}from"./chunks/is.util.NvFMntWM.js";import{i as c}from"./chunks/env.bTBnF6u3.js";import{_ as S}from"./chunks/stringify.CRXUkG82.js";import{d as D,v as x,C as M,c as w,o as A,j as k,ae as B,G as g,a as m}from"./chunks/framework.CtOmD4Hd.js";function R(t,e){return`${t.constructor.name}.${e}`}const L=t=>{if(t.length!==0)return t.length===1&&C(t[0])?t[0]:JSON.stringify(t)};class T{constructor(){this.m=new Map}has(e){return this.m.has(e)}get(e){return this.m.get(e)}set(e,i){this.m.set(e,i)}clear(){this.m.clear()}}const P=(t={})=>(e,i,n)=>{if(typeof n.value!="function")throw new TypeError("Memoization can be applied only to methods");const a=n.value,s=new Map,{logger:l=console,cacheFactory:u=()=>new T,cacheKeyFn:f=L}=t,_=String(i),v=R(e,_);return n.value=function(...o){const h=this,d=f(o);let r=s.get(h);if(r||(r=u(),s.set(h,r)),r.has(d))return r.get(d);const p=a.apply(h,o);try{r.set(d,p)}catch(F){l.error(F)}return p},b(n.value,{clear:()=>{l.log(`${v} @_Memo.clear()`),s.forEach(o=>o.clear()),s.clear()},getInstanceCache:()=>s,getCache:o=>s.get(o)}),n};var O=Object.defineProperty,V=Object.getOwnPropertyDescriptor,N=(t,e,i,n)=>{for(var a=V(e,i),s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=l(e,i,a)||a);return a&&O(e,i,a),a};const I="__red-dot__",E=()=>{};class y{constructor(e){this.adminMode=!1,this.listening=!1,this.cfg={predicate:i=>i.ctrlKey&&i.key==="L",persistToLocalStorage:!0,localStorageKey:"__adminMode__",onRedDotClick:E,onChange:E,beforeEnter:()=>!0,beforeExit:()=>!0,...e}}startListening(){this.listening||c()||(this.adminMode=!!localStorage.getItem(this.cfg.localStorageKey),this.adminMode&&this.toggleRedDotVisibility(),document.addEventListener("keydown",this.keydownListener.bind(this),{passive:!0}),this.listening=!0)}stopListening(){c()||(document.removeEventListener("keydown",this.keydownListener),this.listening=!1)}async keydownListener(e){this.cfg.predicate(e)&&await this.toggleRedDot()}async toggleRedDot(){try{if(!await this.cfg[this.adminMode?"beforeExit":"beforeEnter"]())return}catch(e){console.error(e),alert(S(e));return}if(this.adminMode=!this.adminMode,this.toggleRedDotVisibility(),this.cfg.persistToLocalStorage){const{localStorageKey:e}=this.cfg;this.adminMode?localStorage.setItem(e,"1"):localStorage.removeItem(e)}this.cfg.onChange(this.adminMode)}toggleRedDotVisibility(){this.getRedDotElement().style.display=this.adminMode?"block":"none"}getRedDotElement(){const e=document.createElement("div");return e.id=I,e.style.cssText="position:fixed;width:24px;height:24px;margin-top:-12px;background-color:red;opacity:0.5;top:50%;left:0;z-index:9999999;cursor:pointer;border-radius:0 3px 3px 0",e.addEventListener("click",()=>this.cfg.onRedDotClick()),document.body.append(e),e}}N([P()],y.prototype,"getRedDotElement");const j=D({__name:"AdminModeDemo",setup(t){const e=new y({onChange:i=>console.log({adminMode:i}),onRedDotClick:()=>alert("RedDot clicked")});return x(()=>{e.startListening()}),(i,n)=>null}}),K={id:"adminservice",tabindex:"-1"},Q=JSON.parse('{"title":"AdminService","description":"","frontmatter":{},"headers":[],"relativePath":"adminService.md","filePath":"adminService.md"}'),z={name:"adminService.md"},U=Object.assign(z,{setup(t){return(e,i)=>{const n=M("Badge");return A(),w("div",null,[k("h1",K,[i[0]||(i[0]=m("AdminService ")),g(n,{text:"experimental",type:"warning"}),i[1]||(i[1]=m()),i[2]||(i[2]=k("a",{class:"header-anchor",href:"#adminservice","aria-label":'Permalink to "AdminService <Badge text="experimental" type="warning"/>"'},"â€‹",-1))]),i[3]||(i[3]=B("",6)),g(j)])}}});export{Q as __pageData,U as default};
